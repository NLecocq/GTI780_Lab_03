[{"id":"8df9d511.4fe69","type":"function","z":"d3708536.b79df","name":"","func":"if (msg != null){\n    var currentdate = new Date(Date.now() - 10000);\n    data = msg.payload;\n    var sum = 0;\n    var count = 0;\n    for (var i = data.length - 1; (i > 0) && (data[i].time > currentdate); i--){\n        sum += data[i].value;\n        count += 1;\n    }\n    var mean = parseFloat(sum) / parseFloat(count);\n    node.warn('Moyenne : ' + mean + ', Nombre de donnÃ©es : ' + count);\n    global.set('clsTmp', mean);\n    global.set('clsNb', count);\n}\n","outputs":1,"noerr":0,"x":710,"y":580,"wires":[[]],"inputLabels":["table"]}]